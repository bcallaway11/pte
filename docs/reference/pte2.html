<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>pte2 — pte2 • pte</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="pte2 — pte2"><meta property="og:description" content="Main function for computing panel treatment effects"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pte</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bcallaway11/pte/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>pte2</h1>
    <small class="dont-index">Source: <a href="https://github.com/bcallaway11/pte/blob/HEAD/R/pte.R" class="external-link"><code>R/pte.R</code></a></small>
    <div class="hidden name"><code>pte2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Main function for computing panel treatment effects</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pte2</span><span class="op">(</span></span>
<span>  <span class="va">yname</span>,</span>
<span>  <span class="va">gname</span>,</span>
<span>  <span class="va">tname</span>,</span>
<span>  <span class="va">idname</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">setup_pte_fun</span>,</span>
<span>  <span class="va">subset_fun</span>,</span>
<span>  <span class="va">attgt_fun</span>,</span>
<span>  cband <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  alp <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  boot_type <span class="op">=</span> <span class="st">"multiplier"</span>,</span>
<span>  gt_type <span class="op">=</span> <span class="st">"att"</span>,</span>
<span>  biters <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  cl <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>yname</dt>
<dd><p>Name of outcome in <code>data</code></p></dd>


<dt>gname</dt>
<dd><p>Name of group in <code>data</code></p></dd>


<dt>tname</dt>
<dd><p>Name of time period in <code>data</code></p></dd>


<dt>idname</dt>
<dd><p>Name of id in <code>data</code></p></dd>


<dt>data</dt>
<dd><p>balanced panel data</p></dd>


<dt>setup_pte_fun</dt>
<dd><p>This is a function that should take in <code>data</code>,
<code>yname</code> (the name of the outcome variable in <code>data</code>),
<code>gname</code> (the name of the group variable),
<code>idname</code> (the name of the id variable),
and possibly other arguments such as the significance level <code>alp</code>,
the number of bootstrap iterations <code>biters</code>, and how many clusters
for parallel computing in the bootstrap <code>cl</code>.  The key thing that
needs to be figured out in this function is which groups and time periods
ATT(g,t) should be computed in.  The function should
return a <code>pte_params</code> object which contains all of the parameters
passed into the function as well as <code>glist</code> and <code>tlist</code> which
should be ordered lists of groups and time periods for ATT(g,t) to be computed.</p>
<p>This function provides also provides a good place for error handling related
to the types of data that can be handled.</p>
<p>The <code>pte</code> package contains the function <code>setup_pte</code> that is
a lightweight function that basically just takes the data, omits
the never-treated group from <code>glist</code> but includes all other groups
and drops the first time period.  This works in cases where ATT would
be identified in the 2x2 case (i.e., where there are two time periods,
no units are treated in the first period and the identification strategy
"works" with access to a treated and untreated group and untreated
potential outcomes for both groups in the first period) --- for example,
this approach works if DID is the identification strategy.</p></dd>


<dt>subset_fun</dt>
<dd><p>This is a function that should take in <code>data</code>,
<code>g</code> (for group), <code>tp</code> (for time period), and <code>...</code>
and be able to return the appropriate <code>data.frame</code> that can be used
by <code>attgt_fun</code> to produce ATT(g=g,t=tp).  The data frame should
be constructed using <code>gt_data_frame</code> in order to guarantee that
it has the appropriate columns that identify which group an observation
belongs to, etc.</p></dd>


<dt>attgt_fun</dt>
<dd><p>This is a function that should work in the case where
there is a single group and the "right" number of time periods to
recover an estimate of the ATT.  For example, in the contest of
difference in differences, it would need to work for a single group,
find the appropriate comparison group (untreated units), find the right
time periods (pre- and post-treatment), and then recover an estimate
of ATT for that group.  It will be called over and over separately
by groups and by time periods to compute ATT(g,t)'s.</p>
<p>The function needs to work in a very specific way.  It should take in the
arguments: <code>data</code>, <code>...</code>.  <code>data</code> should be constructed
using the function <code>gt_data_frame</code> which checks to make sure
that <code>data</code> has the correct columns defined.
<code>...</code> are additional arguments (such as
formulas for covariates) that <code>attgt_fun</code> needs.  From these arguments
<code>attgt_fun</code> must return a list with element <code>ATT</code> containing the
group-time average treatment effect for that group and that time period.</p>
<p>If <code>attgt_fun</code> returns an influence function (which should be provided
in a list element named <code>inf_func</code>), then the code will use the
multiplier bootstrap to compute standard errors for group-time average
treatment effects, an overall treatment effect parameter, and a dynamic
treatment effect parameter (i.e., event study parameter).  If
<code>attgt_fun</code> does not return an influence function, then the same
objects will be computed using the empirical bootstrap.  This is usually
(perhaps substantially) easier to code, but also will usually be (perhaps
substantially) computationally slower.</p></dd>


<dt>alp</dt>
<dd><p>significance level; default is 0.05</p></dd>


<dt>boot_type</dt>
<dd><p>should be one of "multiplier" (the default) or "empirical".
The multiplier bootstrap is generally much faster, but <code>attgt_fun</code> needs
to provide an expression for the influence function (which could be challenging
to figure out).  If no influence function is provided, then the <code>pte</code>
package will use the empirical bootstrap no matter what the value of this
parameter.</p></dd>


<dt>gt_type</dt>
<dd><p>which type of group-time effects are computed.
For backward compatiblity, the default choice is "att"</p></dd>


<dt>biters</dt>
<dd><p>number of bootstrap iterations; default is 100</p></dd>


<dt>cl</dt>
<dd><p>number of clusters to be used when bootstrapping; default is 1</p></dd>


<dt>...</dt>
<dd><p>extra arguments that can be passed to create the correct subsets
of the data (depending on <code>subset_fun</code>), to estimate group time
average treatment effects (depending on <code>attgt_fun</code>), or to
aggregating treatment effects (particularly useful are <code>min_e</code>,
<code>max_e</code>, and <code>balance_e</code> arguments to event study aggregations)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>pte_results</code> object</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Brantly Callaway.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

